
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
        <link rel="next" href="UtilityFunctions/">
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.6">
    
    
      
        <title>Veetility Docs</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.558e4712.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#getting-started" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Veetility Docs" class="md-header__button md-logo" aria-label="Veetility Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Veetility Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Getting Started
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Veetility Docs" class="md-nav__button md-logo" aria-label="Veetility Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Veetility Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        Getting Started
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#library-installation" class="md-nav__link">
    Library Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initialisation-of-the-utilityfunctions-class" class="md-nav__link">
    Initialisation of the UtilityFunctions class
  </a>
  
    <nav class="md-nav" aria-label="Initialisation of the UtilityFunctions class">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#google-sheets-authentication" class="md-nav__link">
    Google Sheets Authentication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postgresql-connection-parameters" class="md-nav__link">
    PostgreSQL connection parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup-in-code" class="md-nav__link">
    Setup in code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-in-code" class="md-nav__link">
    Usage in code
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="UtilityFunctions/" class="md-nav__link">
        Utility Functions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="CleaningFunctions/" class="md-nav__link">
        Cleaning
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="QAFunctions/" class="md-nav__link">
        Quality Assessment
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="ViewThroughRate/" class="md-nav__link">
        View Through Rate
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="SlackNotifier/" class="md-nav__link">
        Slack Notifier
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="snowflake/" class="md-nav__link">
        Snowflake
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="S3Bucket/" class="md-nav__link">
        S3Bucket
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="LinkedIn_API/" class="md-nav__link">
        LinkedIn API
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#library-installation" class="md-nav__link">
    Library Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initialisation-of-the-utilityfunctions-class" class="md-nav__link">
    Initialisation of the UtilityFunctions class
  </a>
  
    <nav class="md-nav" aria-label="Initialisation of the UtilityFunctions class">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#google-sheets-authentication" class="md-nav__link">
    Google Sheets Authentication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postgresql-connection-parameters" class="md-nav__link">
    PostgreSQL connection parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup-in-code" class="md-nav__link">
    Setup in code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-in-code" class="md-nav__link">
    Usage in code
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="getting-started">Getting Started</h1>
<p>A library to help create python pipelines for Vayner X companies by providing easy to use functions for performing common data pipeline tasks</p>
<p>This is primarily for working with Social Media Organic and Paid Advertisement Data but also contains
generic functions for writing to postgreSQL and snowflake databases, creating notifications in Slack Channels and writing to Google Sheets</p>
<h2 id="library-installation">Library Installation</h2>
<pre><code>pip install veetility
</code></pre>
<p>To upgrade the library after an update</p>
<pre><code>pip install veetility --upgrade
</code></pre>
<h2 id="initialisation-of-the-utilityfunctions-class">Initialisation of the UtilityFunctions class</h2>
<p>An instance of the "UtilityFunctions" class can be initiated with the ability to read/write with 
google sheets and also to read/write to tables in a postgreSQL database. However none of these
are mandatory.</p>
<h3 id="google-sheets-authentication">Google Sheets Authentication</h3>
<p>In order to use the functions that read/write from google sheets then a dictionary
needs to be passed to the "gspread_auth_dict" argument. 
This dictionary can be obtained from a google API credentials JSON file.</p>
<p>The instructions for creating this JSON file can be found from the <a href="https://docs.gspread.org/en/latest/oauth2.html">gspread documentation</a></p>
<p>Then copy the JSON information in curly brackets as a python dictionary into the gspread.service_account_from_dict() authentication method. The "client_email" parameter in the JSON material is the email address of the google sheet client we have created. <strong>This email address must be given read or write access to any google sheet you want to 
interact with.</strong></p>
<h3 id="postgresql-connection-parameters">PostgreSQL connection parameters</h3>
<p>The following correction parameters need to be passed in during initialisation of the class instance</p>
<ol>
<li>db_name e.g. "vayner_external_XXXXXXXXXXX"</li>
<li>db_host e.g. "dashboard-vayner-XXXXXXXXXXXXXXXXXXXX.rds.amazonaws.com"</li>
<li>db_port e.g. "5432" (this is the default for postgreSQL)</li>
<li>db_user e.g. "tom.jones"</li>
<li>db_password e.g. "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</li>
</ol>
<h2 id="setup-in-code">Setup in code</h2>
<p>It is advisable to put the parameters into a config.py file (cf) which can then be imported into
the main script</p>
<pre><code>import config as cf
from veetility import utility_functions

util = utility_functions.UtilityFunctions(cf.google_sheet_auth_dict,cf.db_user, 
                                          cf.db_password,cf.db_host,
                                          cf.db_port, cf.db_name)
</code></pre>
<h2 id="usage-in-code">Usage in code</h2>
<p>Once an instance of the class UtilityFunctions has been created, e.g. "util" then functions (methods) 
of the class can be used e.g. "write_to_gsheet()".</p>
<p>This can write a pandas.DataFrame to any google sheet the "client_email" has been given "editor" access to.
First pass in the name of the Google Sheet workbook, then the tab of the workbook, then the pandas.DataFrame</p>
<pre><code>util.write_to_gsheet(&quot;Indeed Data Error Tracking&quot;,&quot;PaidNoBoostedMatch&quot;, 
                        paid_no_boosted_match)
</code></pre>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.51d95adb.min.js"></script>
      
    
  </body>
</html>